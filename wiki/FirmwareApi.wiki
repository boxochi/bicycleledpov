#summary API definition to interact with Bicycle LED POV by communicating using USB

Connecting Bicycle LED POV hardware to PC using a USB cable, a new virtual serial port will appear on PC. Commands are sent to the virtual serial port to interact with Bicycle LED POV hardware.

For each command sent, an answer with the value of the same command should be received - this works as a confirmation that command was received on Bicycle LED POV.

=General commands=
==Dummy command: command 1==
This command is useful for knowing that hardware is answering by sending the same byte that it received - 0x01.

Usage: send the value 1.

=Retrieve Bicycle LED POV firmware version: command 2=
This command returns the Bicycle LED POV firmware version.

Usage: send the value 2 and 3 bytes will be received: _byte_1_; _byte_2_; _byte_3_
  * _byte_1_: major version number;
  * _byte_2_: minor version number;
  * _byte_3_: revision version number.

Example: Version 1.0.2; byte_1 = 1, byte_2 = 0 and byte_3 = 2.

=SPI commands=
This commands permits the control of SS lines of devices attached on SPI bus: data latches ICs and DataFlash memory IC. This commands also permits to send/receive data to SPI bus.

=Enable SS0: command 3=
This command is useful to test the LEDs hardware, by turning them on and off.

Usage: 0x03 (send the value 0x03 to the hardware); _byte_1_; _byte_2_; _byte_3_; _byte_4_; _byte_5_; _byte_6_; _byte_7_; _byte_8_

_Byte_x_ bits represents each state of LEDs - bit 0 of _byte_1_ represents the state of the first LED.

=Test sensor hall effect: command 4=
This command is useful to test the sensor hall effect, by turning on and off the first LED when sensor hall effect state is on and off respectively.

Usage: 0x04 (send the value 0x04 to the hardware); _byte_1_

_byte_1_ with value 1 to turn on the test and with value 0 to turn off the test.

=Read byte from DataFlash memory: command 5=
send 0x05; address high; address low.

=Write byte to DataFlash memory: command 6=
send 0x05; address high; address low; byte.

=Read image from DataFlash memory: command 7=
send 0x07

=Write image to DataFlash memory: command 8=
send 0x08

=Auto identification=
The hardware sends periodically on each 300ms the value 0xFE to the serial port. PC Software can look for this 0xFE value to identify a working Bicycle LED POV hardware on the serial port.

If a command is received the Auto identification process is aborted within next 5 seconds.