#summary Prototype based on Atmel ARM7 AT91SAM7
#labels Featured

= The concept =

We can have a Bicycle LED POV that when connected by USB to PC will appear as a USB flash disk. The user can then copy image files from computer to Bicycle LED POV just like if it is a USB flash disk.

The images stored on Bicycle LED POV will then be displayed on LED sequentially, making the POV while the bicycle wheel runs.

= Hardware technical explanation =

Thy system will use an ARM7(Atmel AT91SAM7S128) of 32 bits running at 60MHz. All this processing power will make possible the system behaves as an USB flash disk.

The memory is an DataFlash memory of 500kBytes, which should be enough to hold at least 300 images of 32X32 pixels.

For energy we can use 3 X AAA NiMh batteries. Both ARM7 and DataFlash memory runs at 3,3 volts, we can use an cheap LDO linear regulator to power the 3,3 volts. LED and his drivers can use directly the voltage of the batteries.

= Firmware tecnhical explanation =

DataFlash memory should have FAT32 file system and for that we can use [http://elm-chan.org/fsw/ff/00index_e.html FatFs]. DataFlash memory can be found in many projects, we can just reuse the ones on the LUFA project - this projects implements an USB flash disk using an AVR 8 bits and a DataFlash memory.

We should use Atmel USB drivers for having the system working as an USB flash disk.
Atmel have an application note with title "[http://www.atmel.com/dyn/resources/prod_documents/doc6283.pdf USB Mass Storage Device Driver Implementation]" - the [http://www.atmel.com/dyn/resources/prod_documents/at91sam7x-ek.zip source code].

Images should be stored on BMP files of 32x32 pixels, and then converted to black and white to be sent to the LED.


Linear Low Drop Out voltage regulator
- We can use 3 AAA NiMh cells where we will get about 1,2*3 = 3,6 volts. We can use a LDO regulator which is cheap and will power on the ARM7 and DataFlash memory at about 3,3 volts.

LED
We may use 5mm discrete LED. We will control the current of the LED with a series resistor. Energy for the LED will come directly from the batteries.

==PCB==
We can buy the PCB at  [http://www.goldphoenixpcb.biz/quote2.php goldphoenixpcb].


=Part list=

TODO: update the list.

|| *Reference* || *Value* || *Quantity* || *Unity price* ||
||  || AT91SAM7S128 (ARM7 32bits 128Kbytes_flash 32KBytes_ram 64LQFP) || 1 || [http://search.digikey.com/scripts/DkSearch/dksus.dll?Detail&name=AT91SAM7S128AU001-ND digikey]; [http://pt.mouser.com/Search/ProductDetail.aspx?qs=sGAEpiMZZMvu0Nwh4cA1wUVlLgw9m2DPOAuN%2fkRafsE%3d mouser] ||
||  || AT45DB011D (DataFlash 1MBit 8-SOIC || 1 || [http://search.digikey.com/scripts/DkSearch/dksus.dll?Detail&name=AT45DB011D-SH-B-ND digikey] ||
||  || CRYSTAL 18.432MHZ 18PF HC49/US || 1 || [http://search.digikey.com/scripts/DkSearch/dksus.dll?Detail&name=535-9072-1-ND digikey] ||
|| || USB - mini B || 1 || [http://search.digikey.com/scripts/DkSearch/dksus.dll?Detail&name=H2959CT-ND digikey] ||
||  || 74VHC595 || 8 || [http://pt.farnell.com/1607849/semiconductors-integrated-circuits/product.us0?sku=texas-instruments-sn74hc595dr 0.29€] ||
||  || A3213ELHLT-T || 1 || [http://pt.farnell.com/1457117/semiconductors-integrated-circuits/product.us0?sku=allegro-microsystems-a3213elhlt-t 0.83€] ||
||  || Magnet || 1 || [http://search.digikey.com/scripts/DkSearch/dksus.dll?Detail&name=HE153-ND digikey] ||
||  || Molex Ref: 675031020 || 1 || [http://uk.farnell.com/1125348/connectors/product.us0?sku=molex-675031020 0.76€] ||
||  || AAA battery clip || ? ||  ||
||  ||  ||  || Total price: 26,41€ ||